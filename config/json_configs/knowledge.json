{
    "max_concurrent_indexing": 20,
    "file_storage_config": {
        "type": "file_storage",
        "file_db_config": {
            "type": "local_blob_store",
            "base_path": "./data/file_store"
        },
        "relational_db_config": {
            "type": "postgresql",
            "host": "${POSTGRES_HOST}",
            "port": "${POSTGRES_PORT}",
            "database": "${POSTGRES_DB}",
            "user": "${POSTGRES_USER}",
            "password": "${POSTGRES_PASSWORD}"
        }
    },
    "index_manager_config": {
        "type": "index_manager",
        "file_storage_config": {
            "type": "file_storage",
            "file_db_config": {
                "type": "local_blob_store",
                "base_path": "./data/file_store"
            },
            "relational_db_config": {
                "type": "postgresql",
                "host": "${POSTGRES_HOST}",
                "port": "${POSTGRES_PORT}",
                "database": "${POSTGRES_DB}",
                "user": "${POSTGRES_USER}",
                "password": "${POSTGRES_PASSWORD}"
            }
        },
        "parsed_content_storage_config": {
            "type": "parsed_content_storage",
            "file_db_config": {
                "type": "local_blob_store",
                "base_path": "./data/parsed_content_store"
            },
            "relational_db_config": {
                "type": "postgresql",
                "host": "${POSTGRES_HOST}",
                "port": "${POSTGRES_PORT}",
                "database": "${POSTGRES_DB}",
                "user": "${POSTGRES_USER}",
                "password": "${POSTGRES_PASSWORD}"
            }
        },
        "chunk_storage_config": {
            "type": "chunk_storage",
            "file_db_config": {
                "type": "local_blob_store",
                "base_path": "./data/chunk_store"
            },
            "relational_db_config": {
                "type": "postgresql",
                "host": "${POSTGRES_HOST}",
                "port": "${POSTGRES_PORT}",
                "database": "${POSTGRES_DB}",
                "user": "${POSTGRES_USER}",
                "password": "${POSTGRES_PASSWORD}"
            }
        },
        "parser_config": {
            "type": "parser_combinator",
            "base_output_dir": "./data/parsed_files",
            "ocr_parser": {
                "type": "dots_ocr_parser",
                "dots_ocr": {
                    "type": "dots_ocr",
                    "loading_method": "huggingface",
                    "use_china_mirror": true,
                    "cache_folder": "./models/dots_ocr",
                    "use_snapshot_download": true,
                    "device": "${DEVICE}"
                }
            },
            "native_parser": {
                "type": "native_parser"
            }
        },
        "chunker_config": {
            "type": "token_chunker"
        },
        "indexer_configs": [
            {
                "type": "pruned_hipporag_neo4j_indexer",
                "extractor_config": {
                    "type": "hipporag2_extractor",
                    "llm_config": {
                        "type": "openai_chat",
                        "model_name": "gpt-4o-mini",
                        "temperature": 0.0
                    },
                    "max_concurrent": 10,
                    "batch_size": 5,
                    "retry_attempts": 3,
                    "timeout": 60
                },
                "graph_store_config": {
                    "type": "pruned_hipporag_neo4j",
                    "url": "${NEO4J_URL}",
                    "username": "${NEO4J_USERNAME}",
                    "password": "${NEO4J_PASSWORD}",
                    "database": "${NEO4J_DATABASE}",
                    "storage_path": "./data/graph_index_neo4j",
                    "index_name": "index",
                    "embedding": {
                        "type": "qwen_embedding",
                        "model_name": "${EMBEDDING_MODEL_NAME}",
                        "device": "${DEVICE}",
                        "use_china_mirror": true,
                        "cache_folder": "./models/Qwen"
                    },
                    "add_synonymy_edges": true,
                    "synonymy_edge_topk": 100,
                    "synonymy_edge_sim_threshold": 0.8,
                    "use_float16_embeddings": true,
                    "normalize_chunk_embeddings": true
                }
            },
            {
                "type": "faiss_indexer",
                "index_config": {
                    "type": "faiss",
                    "index_path": "./data/unified_faiss_index",
                    "metric": "cosine",
                    "index_type": "flat",
                    "normalize_L2": true,
                    "embedding_config": {
                        "type": "qwen_embedding",
                        "model_name": "${EMBEDDING_MODEL_NAME}",
                        "device": "${DEVICE}",
                        "use_china_mirror": true,
                        "cache_folder": "./models/Qwen"
                    }
                }
            },
            {
                "type": "bm25_indexer",
                "index_config": {
                    "type": "bm25_builder",
                    "index_path": "./data/unified_bm25_index"
                }
            }
        ]
    }
}
